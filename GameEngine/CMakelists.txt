project(GameEngine)

set(HEADER_DIR ${CMAKE_CURRENT_SOURCE_DIR}/include)
set(SOURCE_DIR ${CMAKE_CURRENT_SOURCE_DIR}/src)

# Récupération automatique des fichiers
file(GLOB_RECURSE HEADERS CONFIGURE_DEPENDS
    "${HEADER_DIR}/*.h"
    "${HEADER_DIR}/*.hpp"
)

file(GLOB_RECURSE SOURCES CONFIGURE_DEPENDS
    "${SOURCE_DIR}/*.cpp"
)

# Création de la librairie
add_library(${PROJECT_NAME}
    ${SOURCES}
    ${HEADERS}
)

# Inclure le dossier include/
target_include_directories(${PROJECT_NAME} PUBLIC ${HEADER_DIR})

# Organisation propre dans l’IDE (Visual Studio, VSCode, CLion…)
# Recrée la hiérarchie include/... et src/...
source_group(
    TREE ${HEADER_DIR}
    PREFIX "Header Files"
    FILES ${HEADERS}
)

source_group(
    TREE ${SOURCE_DIR}
    PREFIX "Source Files"
    FILES ${SOURCES}
)

# SFML
find_package(SFML COMPONENTS 
    System
    Window
    Graphics
    Network
    Audio
    CONFIG REQUIRED
)

# Cherche le package Eigen
find_package(Eigen3 3.3 REQUIRED NO_MODULE)

target_link_libraries(${PROJECT_NAME} PRIVATE
    SFML::Network
    SFML::Graphics
    SFML::Window
    SFML::Audio
    SFML::System
     Eigen3::Eigen   # Lien avec Eigen
)

# Mise dans un dossier de solution Visual Studio
set_target_properties(${PROJECT_NAME} PROPERTIES FOLDER "GameEngine")
